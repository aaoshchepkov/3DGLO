(()=>{"use strict";(e=>{let t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),l=document.querySelector("#timer-seconds");function c(){let e=(new Date("30 march 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/3600),minutes:o,seconds:t}}function n(){let e=c();e.hours<10?t.textContent="0"+e.hours:t.textContent=e.hours,e.minutes<10?o.textContent="0"+e.minutes:o.textContent=e.minutes,e.seconds<10?l.textContent="0"+e.seconds:l.textContent=e.seconds,e.timeRemaining<0&&(t.textContent="00",o.textContent="00",l.textContent="00",document.querySelector(".timer-numbers").style.color="red")}let r=setInterval(n,1e3);c().timeRemaining<0&&clearInterval(r),n()})(),(()=>{const e=document.querySelector("body");let t=document.querySelector("menu"),o=t.querySelectorAll("li>a"),l=t.querySelector(".close-btn");e.addEventListener("click",(e=>{let c=e.target;c.closest(".menu")?t.classList.toggle("active-menu"):((c===l||"MENU"!==c.tagName&&"LI"!==c.tagName)&&t.classList.remove("active-menu"),c&&o.forEach(((o,l)=>{if(c===o){t.classList.remove("active-menu"),e.preventDefault();const l=o.getAttribute("href").substr(1);document.getElementById(l).scrollIntoView({behavior:"smooth",block:"start"})}})));let n=document.querySelector("main>a>img");if(c===n){e.preventDefault(),n=document.querySelector("main>a");const t=n.getAttribute("href").substr(1);document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})}}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelector(".popup-content");document.querySelectorAll(".popup-btn").forEach((o=>{o.addEventListener("click",(()=>{if(screen.width<768)e.style.display="block";else{let o=0,l=setInterval((function(){e.style.display="block",o+=10,t.style.left=o+"px";let c=document.documentElement.clientWidth/2;o>c&&(clearInterval(l),t.style.left="50%")}),1)}}))})),e.addEventListener("mousedown",(t=>{let o=t.target;o.classList.contains("popup-close")?(e.style.display="none",e.querySelector("input").value=""):(o=o.closest(".popup-content"),null===o&&(e.style.display="none",e.querySelector("input").value=""))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let l=e.target;l=l.closest(".service-header-tab"),l&&t.forEach(((e,c)=>{e===l&&(e=>{for(let l=0;l<o.length;l++)e===l?(t[l].classList.add("active"),o[l].classList.remove("d-none")):(t[l].classList.remove("active"),o[l].classList.add("d-none"))})(c)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots");let o;e.forEach(((l,c)=>{o=document.createElement("li"),0===c?(o.classList.add("dot-active"),o.classList.add("dot")):o.classList.add("dot"),c<e.length&&t.appendChild(o)}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item");let t=document.querySelectorAll(".dot");const o=document.querySelector(".portfolio-content");let l,c=0;const n=(e,t,o)=>{e[t].classList.remove(o)},r=(e,t,o)=>{e[t].classList.add(o)},a=()=>{n(e,c,"portfolio-item-active"),n(t,c,"dot-active"),c++,c>=e.length&&(c=0),r(e,c,"portfolio-item-active"),r(t,c,"dot-active")},s=(e=3e3)=>{l=setInterval(a,e)};o.addEventListener("click",(o=>{o.preventDefault();let l=o.target;l.matches(".portfolio-btn, .dot")&&(n(e,c,"portfolio-item-active"),n(t,c,"dot-active"),l.matches("#arrow-right")?c++:l.matches("#arrow-left")?c--:l.matches(".dot")&&t.forEach(((e,t)=>{l===e&&(c=t)})),c>=e.length&&(c=0),c<0&&(c=e.length-1),r(e,c,"portfolio-item-active"),r(t,c,"dot-active"))})),o.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(l)})),o.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&s()})),s(3e3)})(),(e=>{let t=document.querySelector(".command"),o=document.querySelectorAll(".command__photo");t.addEventListener("mouseover",(e=>{let t=e.target;o.forEach((e=>{let o=e.src;t===e&&(e.src=e.dataset.img,e.addEventListener("mouseout",(()=>{e.src=o})))}))}))})(),function(e,t="+7 (___) ___-__-__"){const o=document.querySelectorAll(e);function l(e){const o=e.keyCode,l=t,c=l.replace(/\D/g,""),n=this.value.replace(/\D/g,"");let r=0,a=l.replace(/[_\d]/g,(function(e){return r<n.length?n.charAt(r++)||c.charAt(r):e}));r=a.indexOf("_"),-1!==r&&(a=a.slice(0,r));let s=l.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");s=new RegExp("^"+s+"$"),(!s.test(this.value)||this.value.length<5||o>47&&o<58)&&(this.value=a)}for(const e of o)e.addEventListener("input",l),e.addEventListener("focus",l),e.addEventListener("blur",l)}('[name="user_phone"]',"+7-___-___-__-__"),document.addEventListener("input",(e=>{e.preventDefault();let t=document.querySelector("#calc").querySelectorAll("div>  input"),o=document.querySelectorAll('[name="user_name"]'),l=document.querySelectorAll('[name="user_email"]'),c=document.querySelectorAll('[name="user_phone"]'),n=e.target;const r=()=>{n.value=n.value.replace(/ +/g," "),n.value=n.value.replace(/-+/g,"-"),n.value=n.value.replace(/^-|-$/g,""),n.value=n.value.trim()};n.matches("#form2-message")&&(n.value=n.value.replace(/[^а-яё\-\ ,.!?]/gi,""),n.addEventListener("blur",(()=>{r()}),!0)),t.forEach((e=>{n===e&&(e.value=e.value.replace(/\D/g,""))})),o.forEach((e=>{n===e&&(n.value=n.value.replace(/[^а-яё\ ]/gi,""),e.addEventListener("blur",(()=>{r(),n.value=n.value.split(" ").map((e=>e[0].toUpperCase()+e.substring(1))).join(" "),n.value.length<2&&(n.placeholder="Имя должно быть не короче 2 букв",setTimeout((function(){n.placeholder="Ваше имя"}),3e3),n.value="")}),!0))})),l.forEach((e=>{n===e&&(n.value=n.value.replace(/[^a-z0-9\@\-_.!~*']/gi,""),e.addEventListener("blur",(()=>{r(),!1===/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e.value)&&(n.placeholder="Введите в формате mail@mail.com",setTimeout((function(){n.placeholder="E-mail"}),3e3),n.value="")}),!0))})),c.forEach((e=>{n===e&&(n.value=n.value.replace(/[^0-9\+-]/gi,""),e.addEventListener("blur",(()=>{r(),n.value.length<16&&(n.placeholder="Введите в формате +7-999-999-99-99",setTimeout((function(){n.placeholder="Номер телефона"}),3e3),n.value="")}),!0))}))})),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),l=document.querySelector(".calc-square"),c=document.querySelector(".calc-count"),n=document.querySelector(".calc-day"),r=document.getElementById("total");t.addEventListener("change",(t=>{const a=t.target;(a.matches(".calc-day")||a.matches(".calc-square")||a.matches(".calc-type")||a.matches(".calc-count"))&&(()=>{let t=0,a=1,s=1;const u=o.options[o.selectedIndex].value,i=+l.value;c.value>1&&(a+=(c.value-1)/10),n.value&&n.value<5?s*=2:n.value&&n.value<10&&(s*=1.5),u&&i&&(t=e*u*i*a*s,t=Math.floor(t)),r.textContent=t})(),a.matches(".calc-type")&&""===o.options[o.selectedIndex].value&&(l.value="",c.value="",n.value="",r.value="")}))})(100),(()=>{const e=document.querySelectorAll("form"),t=document.createElement("div");let o=document.querySelector(".popup");t.style.cssText="font-size: 2rem; color: white;",e.forEach((e=>{e.addEventListener("submit",(c=>{c.preventDefault(),e.appendChild(t),t.textContent="Загрузка...";const n=new FormData(e);let r={};n.forEach(((e,t)=>{r[t]=e})),l(r).then((l=>{if(200!==l.status)throw new Error("status network not 200.");t.textContent="Спасибо за обращение! Мы скоро с вами свяжемся",e.querySelectorAll("input").forEach((e=>{e.value=""})),setTimeout((()=>{o.style.display="none"}),2e3),setTimeout((()=>{t.remove()}),5e3)})).catch((e=>{t.textContent="Что то пошло не так...",console.error(e)}))}))}));let l=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/JSON"},body:JSON.stringify(e)})})()})();